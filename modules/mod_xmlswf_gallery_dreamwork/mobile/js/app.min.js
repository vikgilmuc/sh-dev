(function(e,f,h){e.noConflict();var j;var g=function(a){if(a){return console.log(a)}else{console.log("test")}};e(function(){var c=function(n,r,p){var q=this;j=q;var o=r;q.settings={width:"700",height:"500"};q.cates=[];q.$container=e("#"+n);q.slide=function(t,m,s){e(t).css({"-webkit-transform":"translate3d("+(m-q.settings.width)+"px, 0px, 0px)","-webkit-transition-duration":"0.5s",});e(t).bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",s)};q.getSlider=function(m,v){e("#MG-items"+p+" img").addClass("disable");var u=template.compile(tplMGslider);var s=u(v);e("#MG-slider"+p).append(s);q.$container.find(".MG-loading-block").attr("id","MG-loading-block"+p);q.$container.find(".royalSlider").attr("id","royalSlider"+p);e("#royalSlider"+p).royalSlider({globalCaption:true,startSlideId:m,imageScaleMode:"fill",navigateByClick:false,addActiveClass:true,imageAlignCenter:false});var t=e("#royalSlider"+p).data("royalSlider");t.ev.on("rsAfterContentSet",function(x,w){e("#royalSlider"+p+" .rsSlide").waitForImages(function(){if(e("#MG"+p).hasClass("ready")){if(e("#royalSlider"+p+" .rsCaption").text()===""){e("#royalSlider"+p+" .rsCaption").css({"margin-top":0,"margin-bottom":0})}e("#MG"+p).removeClass("ready");e("#MG-loading-block"+p).hide()}})});t.ev.on("rsAfterSlideChange",function(){if(e("#royalSlider"+p+" .rsCaption").text()===""){e("#royalSlider"+p+" .rsCaption").css({"margin-top":0,"margin-bottom":0})}});e("body").on("click","#MG-slider"+p+" .itemButton",function(){e("#MG-items"+p+" img").removeClass("disable");q.slide("#MG-slider"+p,q.settings.width,function(){e("#MG-slider"+p).empty();e("#MG-slider"+p).removeClass("actived");e("#MG"+p).addClass("ready");e("#MG-slider"+p).unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")})})};q.getItems=function(s){e("#MG-items"+p+" img").removeClass("disable");q.itemsObj={};q.itemsObj=q.catsObj.cates[s];q.itemsObj.setting=q.settings;var m=template.compile(tplMGitem);m=m(q.itemsObj);e("#MG-items"+p).append(m);new iScroll("MG-items"+p,{hScrollbar:false,vScrollbar:false,hScroll:false,vScroll:true});e("#MG-items"+p+" .catButton").bind("click",function(){var t=e(this).parents(".MG");if(e(t).hasClass("noHome")){e(t).removeClass("noHome")}e("#MG-items"+p+" img").addClass("disable");q.slide("#MG-items"+p,q.settings.width,function(){e("#MG-items"+p).empty();e("#MG-items"+p).unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")})});e("#MG-items"+p+" .block-item img").bind("click",function(){if(!e(this).hasClass("disable")){q.itemsnum=e(this).data("num");q.slide("#MG-slider"+p,0,function(){if(!e("#MG-slider"+p).hasClass("actived")){e("#MG-slider"+p).addClass("actived");q.getSlider(q.itemsnum,q.itemsObj);e("#MG-slider"+p).unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")}})}})};q.getCats=function(){var m=template.compile(tplMGcat);m=m(q.catsObj);e("#MG-cats"+p).append(m);new iScroll("MG-cats"+p,{hScrollbar:false,vScrollbar:false,hScroll:false,vScroll:true});e("#MG-cats"+p+" img").bind("click",function(){console.log("ashi");var s=e(this).parents(".MG");if(!e(s).hasClass("noHome")){e(s).addClass("noHome");q.catsnum=e(this).data("num");q.slide("#MG-items"+p,0,function(){q.getItems(q.catsnum);e("#MG-items"+p).unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")})}else{return false}});if(q.catsObj.cates.length==1){q.slide("#MG-items"+p,0,function(){q.getItems(0);e("#MG-items"+p).unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")})}};q.initStyle=function(){var m='<style id="mg-style'+p+'">#MG'+p+"{border:1px solid #999;width: "+q.settings.width+"px;height:"+q.settings.height+"px}#MG"+p+" .rsCaption font, #MG"+p+" h4, #MG"+p+" .MG-block-nav-button, #MG"+p+" .MG-slider-item-title{font-size:12px;font-family:lucida grande,tahoma,verdana,arial,sans-serif;}#MG"+p+" .MG-slider-item-title{background: none;margin: 0 80px;color: #fff;}#MG"+p+" h3{background: none;}#MG"+p+" .royalSlider, #MG"+p+" .MG-loading-block, #MG"+p+" .MG-block{width: "+q.settings.width+"px;height:"+q.settings.height+"px}#MG"+p+" .MG-inner{width: "+2*q.settings.width+"px;height: "+q.settings.height+"px}#MG"+p+" .MG-slider, #MG"+p+" .MG-items{left: "+q.settings.width+"px}</style>";if(e("head").find("#mg-style"+p).length===0){e("head").append(m)}else{e("head").find("#mg-style"+p).html("");e("head").append(m)}};q.render=function(){q.initStyle();q.catsObj={};q.catsObj.cates=q.cates;q.$container.append(tplMGmain);q.$container.find(".MG-block").each(function(){var m=e(this).data("id");e(this).attr("id",m+p)});q.$container.find(".MG").attr("id","MG"+p);q.getCats()};q.getArray=function(s){var t=[];for(var m=0;m<s.length;m++){t[m]={desc:e(s[m]).find("description").text(),interactive:e(s[m]).attr("interactive"),link:e(s[m]).find("link").text(),oriImg:{scale:e(s[m]).find("main").attr("scale"),src:e(s[m]).find("main").text()},thumb:{scale:e(s[m]).find("thumb").attr("scale"),src:e(s[m]).find("thumb").text()},price:e(s[m]).find("price").find("regular").text(),zoom:e(s[m]).attr("zoom"),label:e(s[m]).find("label").text()}}return t};q.XML=function(){var m=function(A){var F=e(A);var C=F.find("mobileSettings");var B=C.children();for(var z=0;z<B.length;z++){var D=e(B[z]).prop("tagName");D=D.toLowerCase(D);var y=e(B[z]).text();if(y!==""&&y){q.settings[D]=y}}q.settings.width=e("#"+q.settings.containerid).width();if(B[4].textContent=="yes"){if(q.settings.width>=768&&q.settings.width<=959&&q.settings.mheight1){q.settings.height=q.settings.mheight1;console.log("Mwidth : "+q.settings.width+" Mheight1 : "+q.settings.height)}if(q.settings.width>=568&&q.settings.width<=767&&q.settings.mheight2){q.settings.height=q.settings.mheight2;console.log("Mwidth : "+q.settings.width+" Mheight2 : "+q.settings.height)}if(q.settings.width>=480&&q.settings.width<=568&&q.settings.mheight3){q.settings.height=q.settings.mheight3;console.log("Mwidth : "+q.settings.width+" Mheight3 : "+q.settings.height)}if(q.settings.width<=479&&q.settings.mheight4){q.settings.height=q.settings.mheight4;console.log("Mwidth : "+q.settings.width+" Mheight4 : "+q.settings.height)}}else{if(q.settings.width>=768&&q.settings.width<=959){q.settings.height=647;console.log("Mwidth : "+q.settings.width+" Mheight1 : "+q.settings.height)}if(q.settings.width>=568&&q.settings.width<=767){q.settings.height=500;console.log("Mwidth : "+q.settings.width+" Mheight2 : "+q.settings.height)}if(q.settings.width>=480&&q.settings.width<=567){q.settings.height=392;console.log("Mwidth : "+q.settings.width+" Mheight3 : "+q.settings.height)}if(q.settings.width>=360&&q.settings.width<=479){q.settings.height=270;console.log("Mwidth : "+q.settings.width+" Mheight4 : "+q.settings.height)}if(q.settings.width>=200&&q.settings.width<=359){q.settings.height=170;console.log("Mwidth : "+q.settings.width+" Mheight5 : "+q.settings.height)}}var x=F.find("content");var E=x.children();for(var z=0;z<E.length;z++){q.cates[z]={attr:{thumb:e(E[z]).children("thumb").text(),title:e(E[z]).children("title").text()},items:q.getArray(e(E[z]).find("item"))}}if(q.cates){q.render()}};e.ajax({type:"GET",url:o,success:m})};q.init=function(){q.XML()}};var l=[];var b;if(e("embed").length===0){var d=setInterval(function(){if(e(".mobile").length!==0){clearInterval(d);e(".mobile").each(function(n){var m=e(this).attr("mobile");var p="mbg-container"+n;var o='<div class="mbgallery" id="'+p+'">';e(this).wrap(o);e("#"+p).empty();l[n]=new c("mbg-container"+n,m,n);l[n].init()})}})}else{e("embed").each(function(n){var m=e(this).attr("mobile");var p="mbg-container"+n;var o='<div class="mbgallery" id="'+p+'">';e(this).wrap(o);e("#"+p).empty();l[n]=new c("mbg-container"+n,m,n);l[n].init()})}var a;function k(){jQuery(".mbgallery").html("");for(i=0;i<l.length;i++){l[i].init()}}jQuery(window).resize(function(){clearTimeout(a);a=setTimeout(function(){k()},100)})})})(jQuery,window,document);